<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        ">


	<context:annotation-config />
	<context:spring-configured />
	<context:component-scan base-package="nz.ac.vuw.ecs.rprofs.server" />

	<!-- data manager beans -->
    <bean id="database" class="nz.ac.vuw.ecs.rprofs.server.db.Database">
        <constructor-arg ref="mongo" />
    </bean>

	<bean id="context" class="nz.ac.vuw.ecs.rprofs.server.context.ContextManager" />
    <bean id="datasets" class="nz.ac.vuw.ecs.rprofs.server.data.DatasetManager" />
    <bean id="events" class="nz.ac.vuw.ecs.rprofs.server.data.EventManager" />
	
	<!-- requestfactory autowired @Configurables -->
	<bean id="locator" class="nz.ac.vuw.ecs.rprofs.server.data.DomainObjectLocator" />
	<bean id="services" class="nz.ac.vuw.ecs.rprofs.server.data.ServiceLocator" />
	
	<!-- servlet autowired @Configurables -->
	<bean id="requestFilter" class="nz.ac.vuw.ecs.rprofs.server.GwtRequest" />
	<bean id="log" class="nz.ac.vuw.ecs.rprofs.server.Logger" />
	<bean id="start" class="nz.ac.vuw.ecs.rprofs.server.Start" />
	<bean id="stop" class="nz.ac.vuw.ecs.rprofs.server.Stop" />
	<bean id="weave" class="nz.ac.vuw.ecs.rprofs.server.Weave" />
	
	<bean id="mongo" class="com.mongodb.Mongo">
		<constructor-arg type="java.lang.String" value="#{systemProperties['mongo']}" />
	</bean>

</beans>
